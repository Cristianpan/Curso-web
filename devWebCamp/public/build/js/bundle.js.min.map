{"version":3,"sources":["horas.js","ponentes.js","tags.js"],"names":["busqueda","categoria","dia","document","querySelector","dias","querySelectorAll","addEventListener","terminoBusqueda","value","forEach","checked","buscarEventos","e","target","name","async","console","log","url","response","fetch","eventos","horasTomadas","map","evento","horaId","hora","includes","parseInt","dataset","classList","contains","add","remove","seleccionarHora","obtenerHorasDisponibles","json","body","inputHiddenHora","horaSeleccionada","removerSelected","ponentes","ponentesFiltrados","ponentesInput","inputHiddenPonente","removePonentes","listadoPonentes","firstChild","removeChild","seleccionarPonente","ponenteId","textContent","trim","length","expresion","RegExp","filter","ponente","nombre","toLowerCase","search","fragmen","createDocumentFragment","ponenteHtml","createElement","id","onclick","appendChild","noResultados","mostrarPonentes","arrayPonentes","apellido","formatearPonentes","auxPonente","obtenerPonentes","window","tagsInput","tagsInputHidden","saveTag","tags","split","tagsDiv","tag","tagLi","createTagLi","showTags","readTags","data","preventDefault","newTag","updateInputHidden","addTag","removeTag","toString","ondblclick"],"mappings":"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","file":"bundle.js","sourcesContent":["(() => {\r\n  const busqueda = {\r\n    categoria: \"\",\r\n    dia: \"\",\r\n  };\r\n\r\n  const horas = document.querySelector(\"#horas\");\r\n\r\n  if (horas) {\r\n    const dias = document.querySelectorAll('[name=\"dia\"]');\r\n    const categoria = document.querySelector(\"#categoria\");\r\n    \r\n    categoria.addEventListener(\"change\", terminoBusqueda);\r\n    \r\n    busqueda.categoria = categoria.value;\r\n    dias.forEach((dia) => {\r\n      dia.addEventListener(\"change\", terminoBusqueda);\r\n      dia.checked ? busqueda.dia = dia.value: ''; \r\n    });\r\n\r\n    if (busqueda.dia && busqueda.categoria){\r\n      buscarEventos();\r\n    }\r\n  }\r\n\r\n  function terminoBusqueda(e) {\r\n    busqueda[e.target.name] = e.target.value;\r\n\r\n    if (busqueda.categoria && busqueda.dia) {\r\n      buscarEventos();\r\n    }\r\n  }\r\n\r\n  async function buscarEventos() {\r\n    const { categoria, dia } = busqueda;\r\n    console.log(busqueda);\r\n    const url = `/api/eventosHorario?categoria=${categoria}&dia=${dia}`;\r\n    const response = await fetch(url);\r\n\r\n    const result = await response.json();\r\n\r\n    obtenerHorasDisponibles(result.body);\r\n  }\r\n\r\n  function obtenerHorasDisponibles(eventos) {\r\n    const horasTomadas = eventos.map((evento) => evento.horaId);\r\n    document.querySelector(\"[name='hora']\").value = \"\";\r\n    \r\n    const horasDisponibles = document.querySelectorAll(\"#horas li\");\r\n\r\n    horasDisponibles.forEach((hora) => {\r\n      if (!horasTomadas.includes(parseInt(hora.dataset.horaId))) {\r\n        hora.classList.remove(\"horas__hora--disabled\");\r\n        hora.addEventListener(\"click\", seleccionarHora);\r\n      } else {\r\n        hora.classList.contains(\"horas__hora--disabled\")\r\n          ? ''\r\n          : hora.classList.add(\"horas__hora--disabled\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function seleccionarHora(e) {\r\n    const inputHiddenHora = document.querySelector(\"[name='hora']\");\r\n    removerSelected();\r\n    inputHiddenHora.value = e.target.dataset.horaId;\r\n    e.target.classList.add(\"horas__hora--selected\");\r\n  }\r\n\r\n  function removerSelected() {\r\n    const horaSeleccionada = document.querySelector(\".horas__hora--selected\");\r\n    if (horaSeleccionada) {\r\n      horaSeleccionada.classList.remove(\"horas__hora--selected\");\r\n    }\r\n  }\r\n})();\r\n","(()=> {\r\n    let ponentes = [];\r\n    let ponentesFiltrados = [];\r\n    const ponentesInput = document.querySelector('#ponentes');\r\n    const inputHiddenPonente = document.querySelector(\"[name='ponente']\");\r\n\r\n    if (ponentesInput){\r\n        ponentesInput.addEventListener('input', buscarPonentes); \r\n        \r\n        obtenerPonentes();\r\n    }\r\n    \r\n    \r\n    async function obtenerPonentes(){\r\n        const url = '/api/ponentes'; \r\n        const response = await fetch(url); \r\n        const result = await response.json();  \r\n        formatearPonentes(result.body); \r\n        \r\n        if (inputHiddenPonente.value){\r\n            const auxPonente = ponentes.filter(ponente => ponente.id == inputHiddenPonente.value);\r\n            ponentesInput.value = auxPonente[0].nombre;\r\n        }\r\n    }\r\n\r\n\r\n    function formatearPonentes(arrayPonentes){\r\n        ponentes = arrayPonentes.map(ponente => {\r\n            return {\r\n                id: ponente.id,\r\n                nombre: `${ponente.nombre} ${ponente.apellido}`.trim()\r\n            }\r\n        })\r\n    }\r\n\r\n    function buscarPonentes(e){\r\n        const busqueda = e.target.value.trim(); \r\n\r\n        if (busqueda.length > 4){\r\n            const expresion = new RegExp(busqueda, \"i\");\r\n            ponentesFiltrados = ponentes.filter(ponente => !ponente.nombre.toLowerCase().search(expresion));\r\n        } else {\r\n            ponentesFiltrados = []; \r\n        }\r\n\r\n        if (inputHiddenPonente.value){\r\n            inputHiddenPonente.value = '';\r\n        }\r\n\r\n        mostrarPonentes(); \r\n    }\r\n\r\n    function mostrarPonentes(){\r\n        const listadoPonentes = document.querySelector(\"#listado-ponentes\");\r\n        \r\n        removePonentes();\r\n        \r\n        if (ponentesFiltrados.length > 0) {\r\n            const fragmen = document.createDocumentFragment();\r\n            ponentesFiltrados.forEach(ponente => {\r\n                const ponenteHtml = document.createElement('LI'); \r\n                ponenteHtml.classList.add('listado-ponentes__ponente');\r\n                ponenteHtml.textContent = ponente.nombre; \r\n                ponenteHtml.dataset.ponenteId = ponente.id;\r\n                ponenteHtml.onclick = seleccionarPonente; \r\n                fragmen.appendChild(ponenteHtml);\r\n            })\r\n            listadoPonentes.appendChild(fragmen);\r\n        } else {\r\n            const noResultados = document.createElement('LI'); \r\n            noResultados.classList.add('listado-ponentes__no-resultado');\r\n            noResultados.textContent = 'No hay resultados para tu busqueda'\r\n            listadoPonentes.appendChild(noResultados);\r\n        }\r\n    }\r\n\r\n    function removePonentes(){\r\n        const listadoPonentes = document.querySelector(\"#listado-ponentes\");\r\n        while(listadoPonentes.firstChild){\r\n            listadoPonentes.removeChild(listadoPonentes.firstChild);\r\n        }\r\n    }\r\n\r\n    function seleccionarPonente(e){\r\n        const inputHiddenPonente = document.querySelector(\"[name='ponente']\"); \r\n        inputHiddenPonente.value = e.target.dataset.ponenteId; \r\n        ponentesInput.value = e.target.textContent;\r\n\r\n        removePonentes();\r\n    }\r\n    \r\n\r\n})();","(()=> {\r\n    window.addEventListener('DOMContentLoaded', iniciarApp); \r\n    let tags = [];\r\n\r\n    function iniciarApp(){\r\n        readTags(); \r\n    }\r\n\r\n    function readTags(){\r\n        const tagsInput = document.querySelector('#tags_input')\r\n        const tagsInputHidden = document.querySelector('[name=tags]');\r\n        if (tagsInput){\r\n            tagsInput.addEventListener('beforeinput',saveTag); \r\n\r\n            if (tagsInputHidden.value){\r\n                tags = tagsInputHidden.value.split(',');\r\n                showTags();\r\n            }\r\n        }  \r\n\r\n    }\r\n\r\n    function saveTag(e){\r\n        if (e.data === ','){\r\n            //Se evita que la coma se ingresada en el input\r\n            e.preventDefault();\r\n            const value = e.target.value.trim();\r\n\r\n            if (value){\r\n                tags = [...tags, value];\r\n                e.target.value = '';\r\n                addTag(value);\r\n            }\r\n        }\r\n    }\r\n\r\n    function addTag(newTag){\r\n        const tagsDiv = document.querySelector(\"#tags\"); \r\n        const tag = createTagLi(newTag);\r\n        tagsDiv.appendChild(tag);\r\n        updateInputHidden();\r\n    }\r\n\r\n    function showTags(){\r\n        const tagsDiv = document.querySelector(\"#tags\"); \r\n        tags.forEach((tag)=> {\r\n            const tagLi = createTagLi(tag);\r\n            tagsDiv.appendChild(tagLi);\r\n        });\r\n    }\r\n\r\n    function removeTag(e){\r\n        console.log(e);\r\n        tags = tags.filter(tag => tag != e.target.textContent);\r\n        e.target.remove(); \r\n        updateInputHidden();\r\n    }\r\n\r\n    function updateInputHidden(){\r\n        const inputHidden = document.querySelector('[name=tags]'); \r\n        inputHidden.value = tags.toString();\r\n    }\r\n\r\n    function createTagLi(tag){\r\n        const tagLi = document.createElement('LI');\r\n        tagLi.classList.add('form__tag');\r\n        tagLi.textContent = tag;\r\n        tagLi.ondblclick = removeTag;\r\n        return tagLi;\r\n    }\r\n\r\n})();"]}