(()=>{document.querySelector("#add-task").addEventListener("click",(function(){const o=document.createElement("DIV");o.classList.add("modal"),o.innerHTML='\n            <form class="form new-task">\n                <legend>Añade una nueva tarea</legend>\n                <div class="field">\n                    <label for="task">Tarea</label>\n                    <input type="text" name="task" placeholder="Agrega una tarea al proyecto" id="task"/>\n                </div>\n                <div class="field">\n                    <label for="description">Descripcion</label>\n                    <textarea id="description" name="description" placeholder="Descripción de la tarea"></textarea>\n                </div>\n\n                <div class="options aling-right">\n                    <button type="button" class="close-modal">Cancelar</button>\n                    <input type="submit" class="submit-new-task" value="Agregar Tarea"/>\n                </div>\n            </form>\n        ',setTimeout(()=>{document.querySelector(".form").classList.add("animar")},0),o.addEventListener("click",s=>{s.preventDefault();const c=s.target.classList;if(c.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{o.remove()},200)}else c.contains("submit-new-task")&&function(){const o=document.querySelector("#task").value.trim(),s=document.querySelector("#description").value.trim();o?async function(o){const{nombre:s,descripcion:c}=o,i={nombre:s,descripcion:c,proyectoId:a()};try{const a=await fetch("/api/crearTarea",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}),o=await a.json();o.ok?(t(o.message,"legend","exito"),e=[...e,o.body],setTimeout(()=>{document.querySelector(".modal").remove(),function(e){const t=document.querySelector("#task-list"),a=n(e);t.appendChild(a)}(o.body)},1e3)):t(o.message,"legend")}catch(e){console.log(e)}}({nombre:o,descripcion:s}):t("El nombre de la tarea es obligatorio","legend")}()}),document.querySelector(".dashboard").appendChild(o)}));let e=[];function t(e,t,n="error"){const a=document.querySelector(t),o=document.createElement("DIV");o.classList.add(n),o.classList.add("alert");const s=document.createElement("P");s.textContent=e,o.appendChild(s),a.after(o),setTimeout(()=>{o.remove()},1200)}function n(n){const a={0:"Pendiente",1:"Completa"},o=document.createElement("LI");o.id=n.id,o.classList.add("task");const s=document.createElement("P");s.innerHTML="&#10148; "+n.nombre;const c=document.createElement("P");c.classList.add("description"),c.textContent=n.descripcion;const i=document.createElement("DIV");i.classList.add("options");const d=document.createElement("BUTTON");d.classList.add("state-task"),d.classList.add(""+a[n.estado].toLowerCase()),d.textContent=a[n.estado],d.ondblclick=()=>{!function(n){n.estado=1===n.estado?0:1,async function(n){try{const a=await fetch("/api/actualizarTarea",{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}),o=await a.json(),s=o.ok?"exito":"error";t(o.message,".nombre-pagina",s),o.ok&&function(t){const n={0:"Pendiente",1:"Completa"};e=e.map(e=>(e.id===t.id&&(e={...t}),e));const a=document.getElementById(t.id);a.querySelector("summary p").innerHTML="&#10148; "+t.nombre;const o=a.querySelector(".state-task");o.textContent=n[t.estado],1===t.estado?o.classList.remove("pendiente"):o.classList.remove("completa"),o.classList.add(n[t.estado].toLowerCase());a.querySelector(".description").textContent=t.descripcion}(n)}catch(e){console.log(e)}}(n)}({...n})};const r=document.createElement("BUTTON");r.classList.add("delete-task"),r.textContent="Eliminar",r.ondblclick=()=>{!async function(n){(await Swal.fire({title:"¿Eliminar Tarea?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"})).isConfirmed&&async function(n){const a=await fetch("/api/eliminarTarea",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}),o=await a.json(),s=o.ok?"exito":"error";t(o.message,".nombre-pagina",s),o.ok&&(e=e.filter(e=>{e.id,n.id}),c=n.id,document.getElementById(c).remove());var c}(n)}(n)},i.appendChild(d),i.appendChild(r);const l=document.createElement("SUMMARY");l.appendChild(s),l.appendChild(i);const m=document.createElement("DETAILS");return m.classList.add("details-task"),m.appendChild(l),m.appendChild(c),o.appendChild(m),o}function a(){return new URLSearchParams(window.location.search).get("token")}!async function(){const t="/api/tareas?id="+a();try{const a=await fetch(t),o=await a.json();e=o.body,function(e){const t=document.querySelector("#task-list");if(0===e.length){const e=document.createElement("LI");e.innerHTML="<p>No Hay Tareas</p>",e.classList.add("no-tasks"),t.appendChild(e)}else{const a=document.createDocumentFragment();e.forEach(e=>{const t=n(e);a.appendChild(t)}),t.appendChild(a)}}(e)}catch(e){console.log(e)}}()})();